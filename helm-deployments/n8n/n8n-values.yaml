service:
  enabled: true
  type: ClusterIP
  port: 5678
  name: http

main:
  persistence:
    enabled: true
    storageClass: ceph-block-data
    size: 50Gi

  # App should speak plain HTTP behind Traefik
  extraEnvVars:
    N8N_PROTOCOL: "http"
    N8N_PORT: "5678"

# Traefik ingress
ingress:
  enabled: true
  className: "traefik"
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: web,websecure
  hosts:
    - host: n8n.local
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: n8n-local-tls
      hosts:
        - n8n.local


# --- OPTIONAL: Built-in PostgreSQL (uncomment if you want chart-managed DB)
# db:
#   type: postgresdb
#
# postgresql:
#   enabled: true
#   primary:
#     persistence:
#       enabled: true
#       storageClass: ceph-block-data
#       size: 50Gi
#   auth:
#     username: n8n
#     password: n8npass
#     database: n8n
