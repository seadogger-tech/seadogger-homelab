fullnameOverride: jellyfin

controllers:
  main:
    replicas: 1
    pod:
      hostNetwork: true
      dnsPolicy: ClusterFirstWithHostNet
      annotations:
        backup.velero.io/backup-volumes-excludes: media
      securityContext:
        runAsUser: 1000
        runAsGroup: 1000
        fsGroup: 1000
        supplementalGroups: [33]
    containers:
      app:
        image:
          repository: jellyfin/jellyfin
          tag: "10.10.7"   # bump to 10.11.x later
          pullPolicy: IfNotPresent
        env:
          TZ: America/New_York
        resources:
          requests: { cpu: "200m", memory: "512Mi" }
          limits:   { cpu: "2",    memory: "4Gi" }

service:
  main:
    ports:
      http:
        port: 8096

ingress:
  main:
    enabled: false   # youâ€™re using Traefik IngressRoute separately

persistence:
  config:
    enabled: true
    size: 5Gi
    accessMode: ReadWriteOnce
    storageClass: ceph-fs-data-ec
    globalMounts:
      - path: /config

  cache:
    enabled: true
    size: 250Gi
    accessMode: ReadWriteOnce
    storageClass: ceph-fs-data-ec
    globalMounts:
      - path: /cache

  media:
    enabled: true
    existingClaim: jellyfin-media-ro
    globalMounts:
      - path: /media
        readOnly: true
