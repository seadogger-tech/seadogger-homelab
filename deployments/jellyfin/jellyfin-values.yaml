# jellyfin-values.yaml
image:
  repository: jellyfin/jellyfin
  pullPolicy: IfNotPresent
  # tag: <optional, let chart pin appVersion>

env:
  TZ: America/New_York

service:
  main:
    ports:
      http:
        port: 8096
      https:
        port: 8920
      discovery1:
        port: 1900
        protocol: UDP
      discovery2:
        port: 7359
        protocol: UDP

ingress:
  main:
    enabled: false  # we'll use Traefik IngressRoute CRDs

persistence:
  # Jellyfin configuration (small, keeps library, users, plugins)
  config:
    enabled: true
    size: 5Gi
    storageClass: ceph-fs-data-ec   # <--- set if you want a specific SC
    accessMode: ReadWriteOnce
    mountPath: /config

  # Cache does NOT include transcode temp
  cache:
    enabled: true
    size: 5Gi
    storageClass: ceph-fs-data-ec
    accessMode: ReadWriteOnce
    mountPath: /cache

  # Media library - mount your existing CephFS PVC from earlier
  media:
    enabled: true
    existingClaim: jellyfin-media-ro
    readOnly: true
    mountPath: /media

# Optional: run as non-root UID/GID (tune to your NAS perms if needed)
# podSecurityContext:
#   runAsUser: 568
#   runAsGroup: 568
#   fsGroup: 568
hostNetwork: true
dnsPolicy: ClusterFirstWithHostNet
